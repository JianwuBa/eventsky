(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ad752a6"],{"033d":function(e,n,r){},"1dde":function(e,n,r){var t=r("d039"),o=r("b622"),i=r("2d00"),a=o("species");e.exports=function(e){return i>=51||!t((function(){var n=[],r=n.constructor={};return r[a]=function(){return{foo:1}},1!==n[e](Boolean).foo}))}},2532:function(e,n,r){"use strict";var t=r("23e7"),o=r("5a34"),i=r("1d80"),a=r("ab13");t({target:"String",proto:!0,forced:!a("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,n,r){var t=r("861d"),o=r("c6b6"),i=r("b622"),a=i("match");e.exports=function(e){var n;return t(e)&&(void 0!==(n=e[a])?!!n:"RegExp"==o(e))}},"5a34":function(e,n,r){var t=r("44e7");e.exports=function(e){if(t(e))throw TypeError("The method doesn't accept regular expressions");return e}},"65f0":function(e,n,r){var t=r("861d"),o=r("e8b5"),i=r("b622"),a=i("species");e.exports=function(e,n){var r;return o(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?t(r)&&(r=r[a],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===n?0:n)}},"751a":function(e,n,r){"use strict";r("d3b7"),r("caad6"),r("2532");var t=r("bc3a"),o=r.n(t),i=r("5c96"),a=r("a78e"),c=r.n(a),s=o.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:3e3});s.interceptors.request.use((function(e){e.headers={"Content-Type":"application/x-www-form-urlencoded"};var n=c.a.get("skyToken");return n&&(e.headers.ESToken=n),e}),(function(e){Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="错误请求";break;case 401:e.message="未授权，请重新登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求错误,未找到该资源",window.location.href="/NotFound";break;case 405:e.message="请求方法未允许";break;case 408:e.message="请求超时";break;case 500:e.message="服务器端出错";break;case 501:e.message="网络未实现";break;case 502:e.message="网络错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网络超时";break;case 505:e.message="http版本不支持该请求";break;default:e.message="连接错误".concat(e.response.status)}else JSON.stringify(e).includes("timeout")&&i["Message"].error("服务器响应超时，请刷新当前页"),e.message="连接服务器失败";return i["Message"].error(e.message),Promise.resolve(e.response)}));var u=s,d={get:function(e,n){var r={method:"get",url:e};return n&&(r.params=n),u(r)},post:function(e,n){var r={method:"post",url:e};return n&&(r.data=n),u(r)},put:function(e,n){var r={method:"put",url:e};return n&&(r.params=n),u(r)},delete:function(e,n){var r={method:"delete",url:e};return n&&(r.params=n),u(r)}};n["a"]=d},8418:function(e,n,r){"use strict";var t=r("c04e"),o=r("9bf2"),i=r("5c6c");e.exports=function(e,n,r){var a=t(n);a in e?o.f(e,a,i(0,r)):e[a]=r}},"99af":function(e,n,r){"use strict";var t=r("23e7"),o=r("d039"),i=r("e8b5"),a=r("861d"),c=r("7b0b"),s=r("50c4"),u=r("8418"),d=r("65f0"),l=r("1dde"),f=r("b622"),p=r("2d00"),v=f("isConcatSpreadable"),h=9007199254740991,m="Maximum allowed index exceeded",g=p>=51||!o((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),b=l("concat"),w=function(e){if(!a(e))return!1;var n=e[v];return void 0!==n?!!n:i(e)},k=!g||!b;t({target:"Array",proto:!0,forced:k},{concat:function(e){var n,r,t,o,i,a=c(this),l=d(a,0),f=0;for(n=-1,t=arguments.length;n<t;n++)if(i=-1===n?a:arguments[n],w(i)){if(o=s(i.length),f+o>h)throw TypeError(m);for(r=0;r<o;r++,f++)r in i&&u(l,f,i[r])}else{if(f>=h)throw TypeError(m);u(l,f++,i)}return l.length=f,l}})},"9af6":function(e,n,r){"use strict";r("033d")},a78e:function(e,n,r){var t,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(i){var a;if(t=i,o="function"===typeof t?t.call(n,r,n,e):t,void 0===o||(e.exports=o),a=!0,e.exports=i(),a=!0,!a){var c=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=c,s}}})((function(){function e(){for(var e=0,n={};e<arguments.length;e++){var r=arguments[e];for(var t in r)n[t]=r[t]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(t){function o(){}function i(n,r,i){if("undefined"!==typeof document){i=e({path:"/"},o.defaults,i),"number"===typeof i.expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(u){}r=t.write?t.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in i)i[s]&&(c+="; "+s,!0!==i[s]&&(c+="="+i[s].split(";")[0]));return document.cookie=n+"="+r+c}}function a(e,r){if("undefined"!==typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var c=i[a].split("="),s=c.slice(1).join("=");r||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=n(c[0]);if(s=(t.read||t)(s,u)||n(s),r)try{s=JSON.parse(s)}catch(d){}if(o[u]=s,e===u)break}catch(d){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(n,r){i(n,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}return r((function(){}))}))},a824:function(e,n,r){"use strict";r.r(n);var t=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"live"},[r("div",{attrs:{id:"remote-playerlist"}})])}],i=r("1da1"),a=(r("96cf"),r("a15b"),r("99af"),r("bb93")),c=r("e671"),s=r.n(c),u={data:function(){return{eventId:"",appid:"",channel:"",uid:0,token:"",role:"audience",client:null,isLive:null,remoteUsers:{},videoArr:[]}},methods:{liveViews:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(a["c"])(e.eventId).then((function(n){if(1==n.data.rspCode){var r=n.data.data;if(console.log(r),e.appid=r.appId,e.channel=r.webId,e.isLive=r.status,e.lhid=r.historyId,e.token=r.token,3==e.isLive){var t=s.a.checkSystemRequirements();t&&(e.client=s.a.createClient({mode:"live",codec:"vp8"}));try{e.join()}catch(o){console.error("join error"),console.error(o)}finally{console.log("finally")}}}}));case 2:case"end":return n.stop()}}),n)})))()},join:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.client.setClientRole(e.role),n.next=3,e.client.join(e.appid,e.channel,e.token||null);case 3:e.uid=n.sent,console.log("audience uid:"+e.uid),e.client.on("user-published",e.handleUserPublished),e.client.on("user-unpublished",e.handleUserUnpublished),e.client.on("user-joined",e.handleUserJoined),e.client.on("token-privilege-did-expire",(function(){console.log("onTokenPrivilegeWillExpire")})),e.client.on("token-privilege-did-expire",(function(){console.log("onTokenPrivilegeDidExpire")}));case 10:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.eventId=e.$route.params.pathMatch,e.liveViews();case 2:case"end":return n.stop()}}),n)})))()},handleUserJoined:function(e){var n=e.uid;console.log("handleUserJoined:"+n)},handleUserPublished:function(e,n){console.log("handleUserPublished");var r=e.uid;this.remoteUsers[r]=e,this.subscribe(e,n)},handleUserUnpublished:function(e){console.log("handleUserUnpublished");var n=e.uid;delete this.remoteUsers[n]},subscribe:function(e,n){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.uid,t.next=3,r.client.subscribe(e,n);case 3:console.log("subscribe success"),"video"===n&&(i=r.$('\n                <div id="player-wrapper-'.concat(o,'">\n                    <div id="player-').concat(o,'" class="player"></div>\n                </div>  ')),r.$("#remote-playerlist").append(i),e.videoTrack.play("player-".concat(o))),"audio"===n&&e.audioTrack.play();case 6:case"end":return t.stop()}}),t)})))()},leave:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.remoteUsers={},e.$("#remote-playerlist").html(""),n.next=4,e.client.leave();case 4:console.log("client leaves channel success");case 5:case"end":return n.stop()}}),n)})))()}},d=u,l=(r("9af6"),r("2877")),f=Object(l["a"])(d,t,o,!1,null,"7db26d1c",null);n["default"]=f.exports},ab13:function(e,n,r){var t=r("b622"),o=t("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(r){try{return n[o]=!1,"/./"[e](n)}catch(t){}}return!1}},caad6:function(e,n,r){"use strict";var t=r("23e7"),o=r("4d64").includes,i=r("44d2");t({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},e8b5:function(e,n,r){var t=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==t(e)}}}]);
//# sourceMappingURL=chunk-0ad752a6.ec8224bb.js.map